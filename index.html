<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Assistant - Asistente de Redacci√≥n de Correos</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/umd/lucide-react.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;
        const { Send, Copy, Check, Mail, Sparkles, MessageSquare, User, Trash2, RotateCcw } = lucide;

        const TRANSLATIONS = {
          "en-US": {
            "emailWritingAssistant": "Email Writing Assistant",
            "transformThoughtsDescription": "Transform your thoughts into polished, professional emails with AI assistance",
            "yourThoughts": "Your Thoughts",
            "thoughtsPlaceholder": "Write what you want to communicate... Don't worry about grammar or structure - just get your ideas down.",
            "tipKeyboardShortcut": "üí° Tip: Press Cmd/Ctrl + Enter to generate your email",
            "emailTone": "Email Tone",
            "professionalTone": "Professional",
            "professionalDescription": "Clear and business-appropriate",
            "warmTone": "Warm",
            "warmDescription": "Friendly and approachable",
            "conciseTone": "Concise",
            "conciseDescription": "Brief and to the point",
            "formalTone": "Formal",
            "formalDescription": "Traditional and respectful",
            "casualTone": "Casual",
            "casualDescription": "Relaxed and conversational",
            "persuasiveTone": "Persuasive",
            "persuasiveDescription": "Compelling and convincing",
            "contextOptional": "Context (Optional)",
            "hide": "Hide",
            "show": "Show",
            "contextDescription": "Paste the email you're responding to for better context",
            "contextPlaceholder": "Paste the original email here...",
            "craftingEmail": "Crafting your email...",
            "generateEmail": "Generate Email",
            "generatedEmail": "Generated Email",
            "copied": "Copied!",
            "copy": "Copy",
            "emailWillAppearHere": "Your polished email will appear here",
            "getStartedPrompt": "Enter your thoughts and select a tone to get started",
            "proTips": "‚ú® Pro Tips",
            "tipBeSpecific": "‚Ä¢ Be specific about what you want to achieve",
            "tipIncludeDetails": "‚Ä¢ Include key details even if roughly written",
            "tipTryTones": "‚Ä¢ Try different tones to see what works best",
            "tipAddContext": "‚Ä¢ Add context for more personalized responses",
            "clearAll": "Clear All",
            "improveEmail": "Improve Email",
            "feedbackPlaceholder": "e.g., Make it less formal, change the tone to more direct, add more details about pricing...",
            "needAdjustments": "Need adjustments?",
            "improving": "Improving..."
          },
          "es-ES": {
            "emailWritingAssistant": "Asistente de Redacci√≥n de Correos",
            "transformThoughtsDescription": "Transforma tus ideas en correos electr√≥nicos pulidos y profesionales con asistencia de IA",
            "yourThoughts": "Tus Ideas",
            "thoughtsPlaceholder": "Escribe lo que quieres comunicar... No te preocupes por la gram√°tica o estructura - solo plasma tus ideas.",
            "tipKeyboardShortcut": "üí° Consejo: Presiona Cmd/Ctrl + Enter para generar tu correo",
            "emailTone": "Tono del Correo",
            "professionalTone": "Profesional",
            "professionalDescription": "Claro y apropiado para negocios",
            "warmTone": "C√°lido",
            "warmDescription": "Amigable y accesible",
            "conciseTone": "Conciso",
            "conciseDescription": "Breve y directo",
            "formalTone": "Formal",
            "formalDescription": "Tradicional y respetuoso",
            "casualTone": "Casual",
            "casualDescription": "Relajado y conversacional",
            "persuasiveTone": "Persuasivo",
            "persuasiveDescription": "Convincente y persuasivo",
            "contextOptional": "Contexto (Opcional)",
            "hide": "Ocultar",
            "show": "Mostrar",
            "contextDescription": "Pega el correo al que est√°s respondiendo para mejor contexto",
            "contextPlaceholder": "Pega el correo original aqu√≠...",
            "craftingEmail": "Creando tu correo...",
            "generateEmail": "Generar Correo",
            "generatedEmail": "Correo Generado",
            "copied": "¬°Copiado!",
            "copy": "Copiar",
            "emailWillAppearHere": "Tu correo pulido aparecer√° aqu√≠",
            "getStartedPrompt": "Ingresa tus ideas y selecciona un tono para comenzar",
            "proTips": "‚ú® Consejos Pro",
            "tipBeSpecific": "‚Ä¢ S√© espec√≠fico sobre lo que quieres lograr",
            "tipIncludeDetails": "‚Ä¢ Incluye detalles clave aunque est√©n escritos de forma b√°sica",
            "tipTryTones": "‚Ä¢ Prueba diferentes tonos para ver cu√°l funciona mejor",
            "tipAddContext": "‚Ä¢ Agrega contexto para respuestas m√°s personalizadas",
            "clearAll": "Limpiar Todo",
            "improveEmail": "Mejorar Correo",
            "feedbackPlaceholder": "ej. Hazlo menos formal, cambia el tono a m√°s directo, agrega m√°s detalles sobre el precio...",
            "needAdjustments": "¬øNecesitas ajustes?",
            "improving": "Mejorando..."
          }
        };

        const appLocale = 'es-ES';
        const browserLocale = navigator.languages?.[0] || navigator.language || 'en-US';
        const findMatchingLocale = (locale) => {
          if (TRANSLATIONS[locale]) return locale;
          const lang = locale.split('-')[0];
          const match = Object.keys(TRANSLATIONS).find(key => key.startsWith(lang + '-'));
          return match || 'en-US';
        };
        const locale = findMatchingLocale(browserLocale);
        const t = (key) => TRANSLATIONS[locale]?.[key] || TRANSLATIONS['en-US'][key] || key;

        function EmailWriterApp() {
          const [rawThoughts, setRawThoughts] = useState('');
          const [tone, setTone] = useState('professional');
          const [contextEmail, setContextEmail] = useState('');
          const [generatedEmail, setGeneratedEmail] = useState('');
          const [isLoading, setIsLoading] = useState(false);
          const [copied, setCopied] = useState(false);
          const [showContext, setShowContext] = useState(false);
          const [feedback, setFeedback] = useState('');

          const tones = [
            { value: 'professional', label: t('professionalTone'), description: t('professionalDescription') },
            { value: 'warm', label: t('warmTone'), description: t('warmDescription') },
            { value: 'concise', label: t('conciseTone'), description: t('conciseDescription') },
            { value: 'formal', label: t('formalTone'), description: t('formalDescription') },
            { value: 'casual', label: t('casualTone'), description: t('casualDescription') },
            { value: 'persuasive', label: t('persuasiveTone'), description: t('persuasiveDescription') }
          ];

          const generateEmail = async () => {
            if (!rawThoughts.trim()) return;

            setIsLoading(true);
            try {
              const contextPart = contextEmail.trim() 
                ? `\n\nContext - I am responding to this email:\n"${contextEmail}"\n\n`
                : '';

              const prompt = `You are an expert email writer. Transform the following raw thoughts into a well-crafted email with a ${tone} tone.

Raw thoughts: "${rawThoughts}"${contextPart}

Instructions:
- Write a complete, professional email body
- Use a ${tone} tone throughout
- Make it clear, engaging, and well-structured
- Ensure proper email etiquette
- Do not include a subject line

Please respond in ${locale} language.

Respond with ONLY the email body content. Do not include any explanations or additional text outside of the email.`;

              const response = await fetch("https://api.anthropic.com/v1/messages", {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({
                  model: "claude-sonnet-4-20250514",
                  max_tokens: 1000,
                  messages: [
                    { role: "user", content: prompt }
                  ]
                })
              });

              if (!response.ok) {
                throw new Error('API request failed');
              }

              const data = await response.json();
              setGeneratedEmail(data.content[0].text.trim());
            } catch (error) {
              console.error('Error generating email:', error);
              setGeneratedEmail('Sorry, there was an error generating your email. Please try again.');
            } finally {
              setIsLoading(false);
            }
          };

          const improveEmail = async () => {
            if (!feedback.trim() || !generatedEmail) return;

            setIsLoading(true);
            try {
              const contextPart = contextEmail.trim() 
                ? `\n\nContext - I am responding to this email:\n"${contextEmail}"\n\n`
                : '';

              const prompt = `You are an expert email writer. I have this email that you generated previously:

"${generatedEmail}"

The user wants you to improve it with this feedback: "${feedback}"

${contextPart}

Instructions:
- Apply exactly the improvements the user requests
- Keep the ${tone} tone unless the feedback indicates otherwise
- Preserve the structure and important information from the original email
- Make only the specific changes requested
- Do not include a subject line

Please respond in ${locale} language.

Respond with ONLY the improved email. Do not include explanations or additional text.`;

              const response = await fetch("https://api.anthropic.com/v1/messages", {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({
                  model: "claude-sonnet-4-20250514",
                  max_tokens: 1000,
                  messages: [
                    { role: "user", content: prompt }
                  ]
                })
              });

              if (!response.ok) {
                throw new Error('API request failed');
              }

              const data = await response.json();
              setGeneratedEmail(data.content[0].text.trim());
              setFeedback('');
            } catch (error) {
              console.error('Error improving email:', error);
              setGeneratedEmail('Sorry, there was an error improving your email. Please try again.');
            } finally {
              setIsLoading(false);
            }
          };

          const copyToClipboard = async () => {
            try {
              await navigator.clipboard.writeText(generatedEmail);
              setCopied(true);
              setTimeout(() => setCopied(false), 2000);
            } catch (error) {
              console.error('Failed to copy:', error);
            }
          };

          const clearAll = () => {
            setRawThoughts('');
            setContextEmail('');
            setGeneratedEmail('');
            setFeedback('');
            setShowContext(false);
            setTone('professional');
          };

          const handleKeyPress = (e) => {
            if (e.key === 'Enter' && (e.metaKey || e.ctrlKey)) {
              generateEmail();
            }
            if (e.key === 'Delete' && (e.metaKey || e.ctrlKey) && e.shiftKey) {
              clearAll();
            }
          };

          return React.createElement('div', {
            className: "min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"
          }, 
            // Header
            React.createElement('div', {
              className: "relative overflow-hidden"
            },
              React.createElement('div', {
                className: "absolute inset-0 bg-gradient-to-r from-blue-600/5 to-indigo-600/5"
              }),
              React.createElement('div', {
                className: "relative max-w-6xl mx-auto px-6 py-12"
              },
                React.createElement('div', {
                  className: "text-center"
                },
                  React.createElement('div', {
                    className: "inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl mb-6 shadow-lg"
                  },
                    React.createElement(Mail, { className: "w-8 h-8 text-white" })
                  ),
                  React.createElement('h1', {
                    className: "text-4xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent mb-4"
                  }, t('emailWritingAssistant')),
                  React.createElement('p', {
                    className: "text-xl text-slate-600 max-w-2xl mx-auto"
                  }, t('transformThoughtsDescription'))
                )
              )
            ),
            
            // Main Content
            React.createElement('div', {
              className: "max-w-6xl mx-auto px-6 pb-12"
            },
              React.createElement('div', {
                className: "grid lg:grid-cols-2 gap-8"
              },
                
                // Input Section
                React.createElement('div', {
                  className: "space-y-6"
                },
                  // Context Email Section
                  React.createElement('div', {
                    className: "bg-white/70 backdrop-blur-sm rounded-2xl p-8 shadow-xl border border-white/20"
                  },
                    React.createElement('div', {
                      className: "flex items-center justify-between mb-6"
                    },
                      React.createElement('div', {
                        className: "flex items-center gap-3"
                      },
                        React.createElement('div', {
                          className: "w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center"
                        },
                          React.createElement(User, { className: "w-5 h-5 text-slate-600" })
                        ),
                        React.createElement('h2', {
                          className: "text-2xl font-semibold text-slate-800"
                        }, t('contextOptional'))
                      ),
                      React.createElement('button', {
                        onClick: () => setShowContext(!showContext),
                        className: "text-blue-600 hover:text-blue-700 font-medium transition-colors"
                      }, showContext ? t('hide') : t('show'))
                    ),
                    
                    showContext && React.createElement('div', null,
                      React.createElement('p', {
                        className: "text-slate-600 mb-4"
                      }, t('contextDescription')),
                      React.createElement('textarea', {
                        value: contextEmail,
                        onChange: (e) => setContextEmail(e.target.value),
                        placeholder: t('contextPlaceholder'),
                        className: "w-full h-32 p-4 border border-slate-200 rounded-xl resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white/50 backdrop-blur-sm text-slate-700 placeholder-slate-400"
                      })
                    )
                  ),

                  React.createElement('div', {
                    className: "bg-white/70 backdrop-blur-sm rounded-2xl p-8 shadow-xl border border-white/20"
                  },
                    React.createElement('div', {
                      className: "flex items-center gap-3 mb-6"
                    },
                      React.createElement('div', {
                        className: "w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center"
                      },
                        React.createElement(MessageSquare, { className: "w-5 h-5 text-blue-600" })
                      ),
                      React.createElement('h2', {
                        className: "text-2xl font-semibold text-slate-800"
                      }, t('yourThoughts'))
                    ),
                    
                    React.createElement('textarea', {
                      value: rawThoughts,
                      onChange: (e) => setRawThoughts(e.target.value),
                      onKeyDown: handleKeyPress,
                      placeholder: t('thoughtsPlaceholder'),
                      className: "w-full h-40 p-4 border border-slate-200 rounded-xl resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white/50 backdrop-blur-sm text-slate-700 placeholder-slate-400"
                    }),
                    
                    React.createElement('div', {
                      className: "mt-4 text-sm text-slate-500"
                    }, t('tipKeyboardShortcut'))
                  ),

                  // Tone Selection
                  React.createElement('div', {
                    className: "bg-white/70 backdrop-blur-sm rounded-2xl p-8 shadow-xl border border-white/20"
                  },
                    React.createElement('div', {
                      className: "flex items-center gap-3 mb-6"
                    },
                      React.createElement('div', {
                        className: "w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center"
                      },
                        React.createElement(Sparkles, { className: "w-5 h-5 text-indigo-600" })
                      ),
                      React.createElement('h2', {
                        className: "text-2xl font-semibold text-slate-800"
                      }, t('emailTone'))
                    ),
                    
                    React.createElement('div', {
                      className: "grid grid-cols-2 gap-3"
                    }, tones.map((toneOption) =>
                      React.createElement('button', {
                        key: toneOption.value,
                        onClick: () => setTone(toneOption.value),
                        className: `p-4 rounded-xl border-2 transition-all duration-200 text-left ${
                          tone === toneOption.value
                            ? 'border-blue-500 bg-blue-50 shadow-md'
                            : 'border-slate-200 bg-white/50 hover:border-slate-300 hover:bg-white/70'
                        }`
                      },
                        React.createElement('div', {
                          className: "font-medium text-slate-800"
                        }, toneOption.label),
                        React.createElement('div', {
                          className: "text-sm text-slate-600 mt-1"
                        }, toneOption.description)
                      )
                    ))
                  ),

                  // Generate Button
                  React.createElement('button', {
                    onClick: generateEmail,
                    disabled: isLoading || !rawThoughts.trim(),
                    className: "w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-8 rounded-xl font-semibold text-lg shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-3"
                  },
                    isLoading ? React.createElement('div', null,
                      React.createElement('div', {
                        className: "w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"
                      }),
                      " " + t('craftingEmail')
                    ) : React.createElement('div', null,
                      React.createElement(Send, { className: "w-5 h-5" }),
                      " " + t('generateEmail')
                    )
                  )
                ),

                // Output Section
                React.createElement('div', {
                  className: "space-y-6"
                },
                  React.createElement('div', {
                    className: "bg-white/70 backdrop-blur-sm rounded-2xl p-8 shadow-xl border border-white/20 min-h-96"
                  },
                    React.createElement('div', {
                      className: "flex items-center justify-between mb-6"
                    },
                      React.createElement('div', {
                        className: "flex items-center gap-3"
                      },
                        React.createElement('div', {
                          className: "w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center"
                        },
                          React.createElement(Mail, { className: "w-5 h-5 text-green-600" })
                        ),
                        React.createElement('h2', {
                          className: "text-2xl font-semibold text-slate-800"
                        }, t('generatedEmail'))
                      ),
                      
                      generatedEmail && React.createElement('button', {
                        onClick: copyToClipboard,
                        className: "flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-lg transition-colors text-slate-700 font-medium"
                      },
                        copied ? React.createElement('div', null,
                          React.createElement(Check, { className: "w-4 h-4 text-green-600" }),
                          " " + t('copied')
                        ) : React.createElement('div', null,
                          React.createElement(Copy, { className: "w-4 h-4" }),
                          " " + t('copy')
                        )
                      )
                    ),
                    
                    generatedEmail ? React.createElement('div', {
                      className: "bg-white/80 rounded-xl p-6 border border-slate-200"
                    },
                      React.createElement('pre', {
                        className: "whitespace-pre-wrap font-sans text-slate-700 leading-relaxed"
                      }, generatedEmail)
                    ) : React.createElement('div', {
                      className: "flex flex-col items-center justify-center h-64 text-slate-400"
                    },
                      React.createElement(Mail, { className: "w-16 h-16 mb-4 opacity-50" }),
                      React.createElement('p', {
                        className: "text-lg"
                      }, t('emailWillAppearHere')),
                      React.createElement('p', {
                        className: "text-sm mt-2"
                      }, t('getStartedPrompt'))
                    )
                  ),

                  // Feedback Section
                  generatedEmail && React.createElement('div', {
                    className: "bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-100"
                  },
                    React.createElement('h3', {
                      className: "font-semibold text-slate-800 mb-3 flex items-center gap-2"
                    },
                      React.createElement(RotateCcw, { className: "w-4 h-4" }),
                      t('needAdjustments')
                    ),
                    React.createElement('textarea', {
                      value: feedback,
                      onChange: (e) => setFeedback(e.target.value),
                      placeholder: t('feedbackPlaceholder'),
                      className: "w-full h-20 p-3 border border-slate-200 rounded-lg resize-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 bg-white text-slate-700 placeholder-slate-400 text-sm mb-4"
                    }),
                    React.createElement('div', {
                      className: "flex gap-3"
                    },
                      React.createElement('button', {
                        onClick: improveEmail,
                        disabled: !feedback.trim() || isLoading,
                        className: "flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 px-6 rounded-lg font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2"
                      },
                        isLoading ? React.createElement('div', null,
                          React.createElement('div', {
                            className: "w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"
                          }),
                          " " + t('improving')
                        ) : React.createElement('div', null,
                          React.createElement(RotateCcw, { className: "w-4 h-4" }),
                          " " + t('improveEmail')
                        )
                      ),
                      React.createElement('button', {
                        onClick: clearAll,
                        className: "bg-red-500 hover:bg-red-600 text-white py-3 px-6 rounded-lg font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 flex items-center justify-center gap-2"
                      },
                        React.createElement(Trash2, { className: "w-4 h-4" }),
                        t('clearAll')
                      )
                    )
                  ),

                  // Tips
                  React.createElement('div', {
                    className: "bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100"
                  },
                    React.createElement('h3', {
                      className: "font-semibold text-slate-800 mb-3"
                    }, t('proTips')),
                    React.createElement('ul', {
                      className: "text-sm text-slate-600 space-y-2"
                    },
                      React.createElement('li', null, t('tipBeSpecific')),
                      React.createElement('li', null, t('tipIncludeDetails')),
                      React.createElement('li', null, t('tipTryTones')),
                      React.createElement('li', null, t('tipAddContext'))
                    ),
                    React.createElement('div', {
                      className: "mt-4 pt-4 border-t border-blue-200"
                    },
                      React.createElement('div', {
                        className: "text-xs text-slate-500"
                      },
                        React.createElement('strong', null, "Atajos:"),
                        " Ctrl/Cmd + Enter (generar) | Ctrl/Cmd + Shift + Delete (limpiar)"
                      )
                    )
                  )
                )
              )
            )
          );
        }

        ReactDOM.render(React.createElement(EmailWriterApp), document.getElementById('root'));
    </script>
</body>
</html>
